<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:IssueRunner.Gui.ViewModels"
             x:Class="IssueRunner.Gui.Views.TestStatusView"
             x:DataType="vm:TestStatusViewModel">
    <Grid RowDefinitions="Auto,*" Margin="20">
        <!-- Summary Section -->
        <Grid Grid.Row="0" ColumnDefinitions="Auto,150,Auto,150,Auto,150,Auto,150,*" Margin="0,0,0,20">
            <!-- Current Passed -->
            <Border Grid.Column="0" 
                   Background="#E8F5E9" 
                   BorderBrush="#4CAF50" 
                   BorderThickness="1"
                   CornerRadius="4"
                   Padding="15,10"
                   Margin="0,0,15,0">
                <StackPanel Spacing="4">
                    <TextBlock Text="Current Passed" FontSize="11" Foreground="#666"/>
                    <TextBlock Text="{Binding CurrentPassed}" 
                              FontSize="28" 
                              FontWeight="Bold"
                              Foreground="#2E7D32"/>
                    <TextBlock Text="{Binding PassedDiffText}" 
                              FontSize="14" 
                              FontWeight="SemiBold"
                              Foreground="{Binding PassedDiffColor}"/>
                </StackPanel>
            </Border>
            
            <!-- Current Failed -->
            <Border Grid.Column="2" 
                   Background="#FFEBEE" 
                   BorderBrush="#F44336" 
                   BorderThickness="1"
                   CornerRadius="4"
                   Padding="15,10"
                   Margin="0,0,15,0">
                <StackPanel Spacing="4">
                    <TextBlock Text="Current Failed" FontSize="11" Foreground="#666"/>
                    <TextBlock Text="{Binding CurrentFailed}" 
                              FontSize="28" 
                              FontWeight="Bold"
                              Foreground="#C62828"/>
                    <TextBlock Text="{Binding FailedDiffText}" 
                              FontSize="14" 
                              FontWeight="SemiBold"
                              Foreground="{Binding FailedDiffColor}"/>
                </StackPanel>
            </Border>
            
            <!-- Baseline Passed -->
            <Border Grid.Column="4" 
                   Background="#F5F5F5" 
                   BorderBrush="#9E9E9E" 
                   BorderThickness="1"
                   CornerRadius="4"
                   Padding="15,10"
                   Margin="0,0,15,0">
                <StackPanel Spacing="4">
                    <TextBlock Text="Baseline Passed" FontSize="11" Foreground="#666"/>
                    <TextBlock Text="{Binding BaselinePassed}" 
                              FontSize="28" 
                              FontWeight="Bold"
                              Foreground="#424242"/>
                </StackPanel>
            </Border>
            
            <!-- Baseline Failed -->
            <Border Grid.Column="6" 
                   Background="#F5F5F5" 
                   BorderBrush="#9E9E9E" 
                   BorderThickness="1"
                   CornerRadius="4"
                   Padding="15,10"
                   Margin="0,0,15,0">
                <StackPanel Spacing="4">
                    <TextBlock Text="Baseline Failed" FontSize="11" Foreground="#666"/>
                    <TextBlock Text="{Binding BaselineFailed}" 
                              FontSize="28" 
                              FontWeight="Bold"
                              Foreground="#424242"/>
                </StackPanel>
            </Border>
            
            <!-- Baseline Date -->
            <StackPanel Grid.Column="8" VerticalAlignment="Center">
                <TextBlock Text="Baseline Date" FontSize="11" Foreground="#666"/>
                <TextBlock Text="{Binding BaselineDate}" 
                          FontSize="12" 
                          FontWeight="SemiBold"
                          Foreground="#333"/>
            </StackPanel>
        </Grid>
        
        <!-- Details Section -->
        <Grid Grid.Row="1" ColumnDefinitions="*,*" RowDefinitions="Auto,*">
            <!-- Left Column -->
            <StackPanel Grid.Row="0" Grid.Column="0" Spacing="10" Margin="0,0,10,10">
                <TextBlock Text="Improvements" FontSize="16" FontWeight="Bold" Foreground="#333"/>
                
                <!-- Fixed (was failing, now passing) -->
                <Border Background="#E8F5E9" 
                       BorderBrush="#4CAF50" 
                       BorderThickness="1"
                       CornerRadius="4"
                       Padding="10">
                    <StackPanel Spacing="5">
                        <TextBlock Text="Fixed (now passing)" FontSize="12" FontWeight="SemiBold" Foreground="#2E7D32"/>
                        <TextBlock Text="{Binding Fixed.Count, StringFormat='{}{0} issue(s)'}" FontSize="11" Foreground="#666"/>
                        <ListBox ItemsSource="{Binding Fixed}" MaxHeight="150">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Issue, StringFormat='{}{0}'}" FontSize="11" Margin="5,2"/>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </StackPanel>
                </Border>
                
                <!-- New Passes -->
                <Border Background="#E3F2FD" 
                       BorderBrush="#2196F3" 
                       BorderThickness="1"
                       CornerRadius="4"
                       Padding="10">
                    <StackPanel Spacing="5">
                        <TextBlock Text="New Passes" FontSize="12" FontWeight="SemiBold" Foreground="#1976D2"/>
                        <TextBlock Text="{Binding NewPasses.Count, StringFormat='{}{0} issue(s)'}" FontSize="11" Foreground="#666"/>
                        <ListBox ItemsSource="{Binding NewPasses}" MaxHeight="150">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Issue, StringFormat='{}{0}'}" FontSize="11" Margin="5,2"/>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </StackPanel>
                </Border>
            </StackPanel>
            
            <!-- Right Column -->
            <StackPanel Grid.Row="0" Grid.Column="1" Spacing="10" Margin="10,0,0,10">
                <TextBlock Text="Regressions" FontSize="16" FontWeight="Bold" Foreground="#333"/>
                
                <!-- Regressions (was passing, now failing) -->
                <Border Background="#FFEBEE" 
                       BorderBrush="#F44336" 
                       BorderThickness="1"
                       CornerRadius="4"
                       Padding="10">
                    <StackPanel Spacing="5">
                        <TextBlock Text="Regressions (now failing)" FontSize="12" FontWeight="SemiBold" Foreground="#C62828"/>
                        <TextBlock Text="{Binding Regressions.Count, StringFormat='{}{0} issue(s)'}" FontSize="11" Foreground="#666"/>
                        <ListBox ItemsSource="{Binding Regressions}" MaxHeight="150">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Issue, StringFormat='{}{0}'}" FontSize="11" Margin="5,2"/>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </StackPanel>
                </Border>
                
                <!-- New Fails -->
                <Border Background="#FFF3E0" 
                       BorderBrush="#FF9800" 
                       BorderThickness="1"
                       CornerRadius="4"
                       Padding="10">
                    <StackPanel Spacing="5">
                        <TextBlock Text="New Fails" FontSize="12" FontWeight="SemiBold" Foreground="#E65100"/>
                        <TextBlock Text="{Binding NewFails.Count, StringFormat='{}{0} issue(s)'}" FontSize="11" Foreground="#666"/>
                        <ListBox ItemsSource="{Binding NewFails}" MaxHeight="150">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Issue, StringFormat='{}{0}'}" FontSize="11" Margin="5,2"/>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>





